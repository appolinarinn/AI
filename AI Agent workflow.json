{
  "name": "AI Agent workflow",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "weeks",
              "triggerAtHour": 10
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -560,
        752
      ],
      "id": "651543b5-0213-433f-8760-57d62b8d6d64",
      "name": "Run every day at 7AM",
      "notesInFlow": true,
      "notes": "Double-click to open"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "85b5c530-2c13-4424-ab83-05979bc879a5",
              "name": "output",
              "value": "={{ $json.output }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        160,
        544
      ],
      "id": "99f7bb9e-f8c0-43ca-a9a8-a76634ac9611",
      "name": "Output",
      "notesInFlow": true,
      "notes": "Double-click to open"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -560,
        544
      ],
      "id": "a0390291-6794-4673-9a6a-5c3d3a5d9e4b",
      "name": "Click â€˜Execute workflowâ€™ to run"
    },
    {
      "parameters": {
        "content": "## âš¡ Start here:",
        "height": 224,
        "width": 224,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -624,
        480
      ],
      "id": "fac5929f-e065-4474-96b1-7bcc06834238",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -272,
        768
      ],
      "id": "b16482e8-0d48-4426-aa93-c3fee11dd3cd",
      "name": "OpenAI Model",
      "notesInFlow": true,
      "credentials": {
        "openAiApi": {
          "id": "YegVcXLOsiF2Qy53",
          "name": "n8n free OpenAI API credits"
        }
      },
      "notes": "Double-click to open"
    },
    {
      "parameters": {
        "content": "@[youtube](cMyOkQ4N-5M)",
        "height": 512,
        "width": 902,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -352,
        -96
      ],
      "id": "ec65e69e-77fa-4912-a4af-49e0a248e2c8",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You are a music curator from the underground scene.\nYour taste: alternative rock, synth-pop, electronic rock, metal.\n\nYou are given a list of tracks and albums from the API.\n\nYour task:\n\nChoose the 3 most interesting new tracks\n\nChoose 1 cult or half-forgotten album\n\nDescribe each item through atmosphere and emotion, and add technical genres\n\nAvoid clichÃ©s and marketing phrases\n\nAnswer style:\nâ€“ short paragraphs\nâ€“ casual, light\nâ€“ no emojis or maximum 1â€“2\n\nOutput format:\n\n\"Tracks of the week:\n\nTitle â€” artist\nShort description and genre (1â€“2 sentences)\n\nAlbum:\nTitle â€” artist (year)\nAtmospheric description and genre (2â€“3 sentences)\"\n\ntemperature = 0.4\n\nIMPORTANT: You DO NOT HAVE THE RIGHT to invent tracks, artists or albums.\nChoose ONLY from the list provided. \nIf there is not enough data, write â€œNot enough data in the listâ€, but do not invent anything.\nYou CANNOT change the titles or artists.\nSelect tracks ONLY by their id and COPY the title/artist/url from the line.\n\nHere's a list of tracks (use only these):\n\n{{ $json.tracks.map(t => `- ${t.track} â€” ${t.artist} [${t.tag}] | ${t.url}`).join('\\n') }}\n\nSelect exactly 3 tracks\n",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -272,
        544
      ],
      "id": "084d56aa-d157-4964-9073-b36d9d9589c5",
      "name": "AI Summary Agent",
      "notesInFlow": true,
      "notes": "Double-click to open"
    },
    {
      "parameters": {
        "content": "### Double click here to see the results:",
        "height": 240,
        "width": 192,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        112,
        464
      ],
      "id": "a4b7a69a-0db8-4b9b-a81d-fd83378043a3",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "### ðŸ“° Daily AI Summary\n\n\nThis workflow gets the latest news and asks AI to summarize it for you.\n\nâ­ Bonus: Send the summary via email by connecting your Gmail account\n\nâ–¶ Watch the video to get started ",
        "height": 272,
        "width": 224,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -624,
        32
      ],
      "id": "74d80857-5e63-47a8-8e86-8ecd10fd5f9e",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "sendTo": "pm.com48@gmail.com",
        "subject": "Your news daily summary",
        "emailType": "text",
        "message": "={{ $json.output }}",
        "options": {}
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        432,
        544
      ],
      "id": "45625d0d-bf26-4379-9eed-7bbc8e5d87a5",
      "name": "Send summary by email",
      "webhookId": "093b04f1-5e78-4926-9863-1b100d6f2ead",
      "notesInFlow": true,
      "credentials": {
        "gmailOAuth2": {
          "id": "6pfa8thTa1tEEXf1",
          "name": "Gmail account 2"
        }
      },
      "notes": "Double-click to open"
    },
    {
      "parameters": {
        "url": "https://ws.audioscrobbler.com/2.0/",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "method",
              "value": "tag.gettoptracks"
            },
            {
              "name": "=tag",
              "value": "={{ $json.tag }}\n"
            },
            {
              "name": "api_key",
              "value": "e62a6464238fd9d76cd2b701dda67721"
            },
            {
              "name": "format",
              "value": "json"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -464,
        976
      ],
      "id": "a2c540a2-35d5-4a60-89dc-7584708ec6b0",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\nfunction toObject(x) {\n  if (!x) return null;\n\n  // ÐµÑÐ»Ð¸ Ð½Ð¾Ð´Ð° Ð²ÐµÑ€Ð½ÑƒÐ»Ð° ÑÑ‚Ñ€Ð¾ÐºÑƒ JSON\n  if (typeof x === \"string\") {\n    try { return JSON.parse(x); } catch { return null; }\n  }\n\n  // ÐµÑÐ»Ð¸ body/rawBody ÑÑ‚Ñ€Ð¾ÐºÐ¾Ð¹\n  if (typeof x.body === \"string\") {\n    try { return JSON.parse(x.body); } catch {}\n  }\n  if (typeof x.rawBody === \"string\") {\n    try { return JSON.parse(x.rawBody); } catch {}\n  }\n\n  // ÐµÑÐ»Ð¸ body ÑƒÐ¶Ðµ Ð¾Ð±ÑŠÐµÐºÑ‚\n  if (x.body && typeof x.body === \"object\") return x.body;\n\n  return x;\n}\n\nlet all = [];\n\nfor (const it of items) {\n  const resp = toObject(it.json);\n\n  const tracks = resp?.toptracks?.track ?? resp?.tracks?.track ?? [];\n  const list = Array.isArray(tracks) ? tracks : [tracks];\n\n  all.push(...list.map(t => ({\n    track: t?.name ?? \"\",\n    artist: t?.artist?.name ?? t?.artist ?? \"\",\n    url: t?.url ?? \"\"\n  })));\n}\n\n// ÑƒÐ±Ñ€Ð°Ñ‚ÑŒ Ð´ÑƒÐ±Ð»Ð¸\nconst seen = new Set();\nconst unique = [];\nfor (const t of all) {\n  const key = (t.track + \"||\" + t.artist).toLowerCase();\n  if (t.track && t.artist && !seen.has(key)) {\n    seen.add(key);\n    unique.push(t);\n  }\n}\n\nreturn [{ tracks: unique.slice(0, 40) }];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -240,
        992
      ],
      "id": "69f52576-2000-4c29-8ff6-377640db6f2e",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "jsCode": "const tags = [\"alternative\", \"synth-pop\", \"electronic\", \"metal\"];\nreturn tags.map(tag => ({ tag }));\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -688,
        1072
      ],
      "id": "7f0c3b8d-2387-4423-a165-5f9411c33cf4",
      "name": "Code in JavaScript1"
    }
  ],
  "pinData": {},
  "connections": {
    "Run every day at 7AM": {
      "main": [
        [
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Click â€˜Execute workflowâ€™ to run": {
      "main": [
        [
          {
            "node": "AI Summary Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Summary Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Summary Agent": {
      "main": [
        [
          {
            "node": "Output",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Output": {
      "main": [
        [
          {
            "node": "Send summary by email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "AI Summary Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript1": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "availableInMCP": false
  },
  "versionId": "fc99b998-22f0-47bf-a8e6-97c06a227a38",
  "meta": {
    "templateId": "ready-to-run-ai-workflow",
    "templateCredsSetupCompleted": true,
    "instanceId": "dfb07730d67e2e035c5257f69e8c36986a7b443d97a89ce610fe8b209839e087"
  },
  "id": "EZxbADgpoKDgUYHY",
  "tags": []
}